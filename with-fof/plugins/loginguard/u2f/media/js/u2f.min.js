/*
 @package   AkeebaLoginGuard
 @copyright Copyright (c)2016-2021 Nicholas K. Dionysopoulos / Akeeba Ltd
 @license   GNU General Public License version 3, or later
*/
var akeeba=akeeba||{};akeeba.LoginGuard=akeeba.LoginGuard||{};akeeba.LoginGuard.u2f=akeeba.LoginGuard.u2f||{regData:null,authData:null,handlingError:!1};akeeba.LoginGuard.u2f.setUp=function(a){a.preventDefault();akeeba.LoginGuard.u2f.regData=akeeba.System.getOptions("akeeba.LoginGuard.u2f.regData",["",""]);a=akeeba.LoginGuard.u2f.regData[0];u2f.register(a.appId,[a],akeeba.LoginGuard.u2f.regData[1],akeeba.LoginGuard.u2f.setUpCallback);return!1};
akeeba.LoginGuard.u2f.setUpCallback=function(a){void 0===a.errorCode||0===a.errorCode?(document.getElementById("loginguard-method-code").value=JSON.stringify(a),document.forms["loginguard-method-edit"].submit()):akeeba.LoginGuard.u2f.showError(a.errorCode)};
akeeba.LoginGuard.u2f.showError=function(a){if(!akeeba.LoginGuard.u2f.handlingError){akeeba.LoginGuard.u2f.handlingError=!0;switch(a){default:alert(Joomla.JText._("PLG_LOGINGUARD_U2F_ERR_JS_OTHER")+" // "+a);break;case 2:alert(Joomla.JText._("PLG_LOGINGUARD_U2F_ERR_JS_CANNOTPROCESS"));break;case 3:alert(Joomla.JText._("PLG_LOGINGUARD_U2F_ERR_JS_CLIENTCONFIGNOTSUPPORTED"));break;case 4:if(""!=Joomla.JText._("PLG_LOGINGUARD_U2F_ERR_JS_INELIGIBLE_SIGN")){alert(Joomla.JText._("PLG_LOGINGUARD_U2F_ERR_JS_INELIGIBLE_SIGN"));
break}alert(Joomla.JText._("PLG_LOGINGUARD_U2F_ERR_JS_INELIGIBLE"));break;case 5:alert(Joomla.JText._("PLG_LOGINGUARD_U2F_ERR_JS_TIMEOUT"))}try{$("#loginguard-u2f-button").show()}catch(b){}akeeba.LoginGuard.u2f.handlingError=!1}};akeeba.LoginGuard.u2f.validate=function(){akeeba.LoginGuard.u2f.authData=akeeba.System.getOptions("akeeba.LoginGuard.u2f.authData",["",""]);u2f.sign(akeeba.LoginGuard.u2f.authData[0].appId,akeeba.LoginGuard.u2f.authData[0].challenge,akeeba.LoginGuard.u2f.authData,akeeba.LoginGuard.u2f.validateCallback)};
akeeba.LoginGuard.u2f.validateCallback=function(a){void 0===a.errorCode||0===a.errorCode?(document.getElementById("loginGuardCode").value=JSON.stringify(a),document.forms["loginguard-captive-form"].submit()):akeeba.LoginGuard.u2f.showError(a.errorCode)};akeeba.Loader.add(["akeeba.System"],function(){akeeba.System.forEach(document.querySelectorAll(".loginguard_u2f_setup"),function(a,b){akeeba.System.addEventListener(b,"click",akeeba.LoginGuard.u2f.setUp)})}); //# sourceMappingURL=u2f.map
