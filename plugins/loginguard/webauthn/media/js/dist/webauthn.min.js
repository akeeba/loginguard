var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(c||"")+"_"+b++,c)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.polyfill("Array.from",function(a){return a?a:function(a,c,d){c=null!=c?c:function(a){return a};var b=[],f="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if("function"==typeof f){a=f.call(a);for(var g=0;!(f=a.next()).done;)b.push(c.call(d,f.value,g++))}else for(f=a.length,g=0;g<f;g++)b.push(c.call(d,a[g],g));return b}},"es6","es3");
function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable}));c.push.apply(c,d)}return c}
function _objectSpread(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?ownKeys(Object(c),!0).forEach(function(b){_defineProperty(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):ownKeys(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}
function _defineProperty(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance");}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}
function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}var akeeba=akeeba||{};akeeba.LoginGuard=akeeba.LoginGuard||{};akeeba.LoginGuard.webauthn=akeeba.LoginGuard.webauthn||{authData:null};akeeba.LoginGuard.webauthn.arrayToBase64String=function(a){return btoa(String.fromCharCode.apply(String,_toConsumableArray(a)))};
akeeba.LoginGuard.webauthn.setUp=function(){if("credentials"in navigator){var a=document.forms["loginguard-method-edit"].querySelectorAll('input[name="pkRequest"]')[0].value;a=JSON.parse(atob(a));a.challenge=Uint8Array.from(window.atob(a.challenge),function(a){return a.charCodeAt(0)});a.user.id=Uint8Array.from(window.atob(a.user.id),function(a){return a.charCodeAt(0)});a.excludeCredentials&&(a.excludeCredentials=a.excludeCredentials.map(function(a){return _objectSpread({},a,{id:Uint8Array.from(window.atob(a.id),
function(a){return a.charCodeAt(0)})})}));navigator.credentials.create({publicKey:a}).then(function(a){a={id:a.id,type:a.type,rawId:akeeba.LoginGuard.webauthn.arrayToBase64String(new Uint8Array(a.rawId)),response:{clientDataJSON:akeeba.LoginGuard.webauthn.arrayToBase64String(new Uint8Array(a.response.clientDataJSON)),attestationObject:akeeba.LoginGuard.webauthn.arrayToBase64String(new Uint8Array(a.response.attestationObject))}};document.getElementById("loginguard-method-code").value=btoa(JSON.stringify(a));
document.forms["loginguard-method-edit"].submit()},function(a){akeeba.LoginGuard.webauthn.handle_error(a)})}else alert(Joomla.JText._("PLG_LOGINGUARD_WEBAUTHN_ERR_NOTAVAILABLE_HEAD")),console.log("This browser does not support Webauthn")};akeeba.LoginGuard.webauthn.handle_error=function(a){try{$("#loginguard-webauthn-button").show()}catch(b){}alert(a);console.log(a)};
akeeba.LoginGuard.webauthn.validate=function(){if("credentials"in navigator){console.log(akeeba.LoginGuard.webauthn.authData);var a=akeeba.LoginGuard.webauthn.authData;a.challenge?(a.challenge=Uint8Array.from(window.atob(a.challenge),function(a){return a.charCodeAt(0)}),a.allowCredentials=a.allowCredentials.map(function(a){return _objectSpread({},a,{id:Uint8Array.from(atob(a.id),function(a){return a.charCodeAt(0)})})}),navigator.credentials.get({publicKey:a}).then(function(a){a={id:a.id,type:a.type,
rawId:akeeba.LoginGuard.webauthn.arrayToBase64String(new Uint8Array(a.rawId)),response:{authenticatorData:akeeba.LoginGuard.webauthn.arrayToBase64String(new Uint8Array(a.response.authenticatorData)),clientDataJSON:akeeba.LoginGuard.webauthn.arrayToBase64String(new Uint8Array(a.response.clientDataJSON)),signature:akeeba.LoginGuard.webauthn.arrayToBase64String(new Uint8Array(a.response.signature)),userHandle:a.response.userHandle?akeeba.LoginGuard.webauthn.arrayToBase64String(new Uint8Array(a.response.userHandle)):
null}};document.getElementById("loginGuardCode").value=btoa(JSON.stringify(a));document.forms["loginguard-captive-form"].submit()},function(a){console.log(a);akeeba.LoginGuard.webauthn.handle_error(a)})):akeeba.LoginGuard.webauthn.handle_error(Joomla.JText._("PLG_LOGINGUARD_WEBAUTHN_ERR_NO_STORED_CREDENTIAL"))}else alert(Joomla.JText._("PLG_LOGINGUARD_WEBAUTHN_ERR_NOTAVAILABLE_HEAD")),console.log("This browser does not support Webauthn")}; //# sourceMappingURL=webauthn.map
